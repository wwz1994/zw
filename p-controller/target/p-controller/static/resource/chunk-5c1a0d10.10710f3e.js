(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c1a0d10"],{"61f7":function(t,e,i){"use strict";function n(t){return/^((19[0-9])|(16[0-9])|(17[0-9])|(14[0-9])|(13[0-9])|(15[^4,\D])|(18[0-9]))\d{8}$/.test(t)}function o(t){return/^([a-z0-9A-Z]+[-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/.test(t)}function a(t){return!!t&&5==t.length}function s(t){return/^\d{6}$/.test(t)}i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o}),i.d(e,"d",function(){return a}),i.d(e,"c",function(){return s})},b605:function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return s}),i.d(e,"d",function(){return r});i("cadf"),i("551c"),i("f751"),i("097d");var n=i("b775");function o(t){return Object(n["a"])({url:"/item/gallery/"+t})}function a(t){return Object(n["a"])({url:"/item/tab",params:{item_id:t}})}function s(t,e){return Object(n["a"])({url:"/item/item_link/check",method:"post",params:{item_text:t,item_link:e},timeout:1e4})}function r(t){return Object(n["a"])({url:"/upload/image/cuntao",method:"post",data:t,headers:{"Content-Type":"multipart/form-data;boundary="+(new Date).getTime()},timeout:3e4})}},d6e3:function(t,e,i){},dcf5:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:"农村淘宝拉新任务",expression:"'农村淘宝拉新任务'"}],staticClass:"tab-content"},[i("van-nav-bar",{staticClass:"nav-bar-bg",attrs:{fixed:"",title:"村淘拉新","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),i("main",{staticClass:"tab-main-move-down"},[i("swiper",{ref:"itemSwiper",staticStyle:{"z-index":"0"},attrs:{options:t.itemSwipeOption}},[t._l(t.itemInfo.thumbs,function(t){return i("swiper-slide",{key:t,staticClass:"swipe-item"},[i("img",{staticClass:"swipe-img",attrs:{preview:"deal_num_task",src:t}})])}),i("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2),i("van-cell-group",[i("van-cell",{staticClass:"goods-express"},[i("van-col",{attrs:{span:"10"}},[t._v("库存：较多")]),i("van-col",{attrs:{span:"14"}},[t._v("购物券：不支持")])],1),i("van-cell",{staticClass:"goods-express"},[i("van-col",{attrs:{span:"10"}},[t._v("退款政策：支持退款")]),i("van-col",{attrs:{span:"14"}},[t._v("买家需提供：二维码")])],1)],1),i("van-cell-group",{staticClass:"goods-cell-group"},[i("van-cell",{attrs:{value:"进入店铺",icon:"shop-o","is-link":""},on:{click:function(e){return t.$router.push("/home")}}},[i("template",{slot:"title"},[i("span",{staticClass:"van-cell-text"},[t._v(t._s(t.shop.shopName))])])],2)],1),i("van-tabs",{staticClass:"item-detail-help-card",attrs:{type:"card",color:"#607D8B"},model:{value:t.itemInfo.activeTab,callback:function(e){t.$set(t.itemInfo,"activeTab",e)},expression:"itemInfo.activeTab"}},t._l(t.itemInfo.tabs,function(e){return i("van-tab",{key:e.id,attrs:{title:e.tabName}},[i("div",{staticStyle:{padding:"6px"},domProps:{innerHTML:t._s(e.tabContent)}})])}),1),i("van-goods-action",[i("van-goods-action-icon",{attrs:{icon:"chat-o",text:"客服"},on:{click:t.onContactService}}),i("van-goods-action-icon",{attrs:{icon:"shop-o",text:"店铺"},on:{click:function(e){return t.$router.push("/home")}}}),i("van-goods-action-button",{attrs:{type:"primary",text:"立即购买"},on:{click:t.onOrder}})],1),i("van-sku",{attrs:{"stepper-title":"购买数量",sku:t.sku,goods:t.itemInfo,"hide-stock":!0,"initial-sku":t.initialSku},on:{"sku-selected":t.onSkuSelected,"buy-clicked":t.onBuyClicked},scopedSlots:t._u([{key:"sku-messages",fn:function(e){return[i("van-cell-group",{staticStyle:{"margin-bottom":"20px"}},[i("div",{staticStyle:{display:"flex",padding:"10px 15px","line-height":"24px"}},[i("div",{staticStyle:{color:"#323233","max-width":"90px",flex:"1"}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("拉新二维码:\n                        ")]),i("div",{},[i("van-uploader",{attrs:{"max-count":1,"max-size":1048576,"after-read":t.afterReadImage},on:{oversize:t.onOverSize,delete:t.onDeleteImage},model:{value:t.imageList,callback:function(e){t.imageList=e},expression:"imageList"}},[i("van-button",{attrs:{icon:"photo",type:"primary",size:"mini",plain:""}},[t._v("上传图片")])],1)],1)]),i("van-field",{attrs:{clearable:"",label:"邮箱:",placeholder:"(选填)请输入邮箱以便接收通知"},model:{value:t.orderInfo.itemAttachments.email.value,callback:function(e){t.$set(t.orderInfo.itemAttachments.email,"value",e)},expression:"orderInfo.itemAttachments.email.value"}})],1)]}},{key:"sku-stepper",fn:function(e){return[i("div",[i("van-cell",{attrs:{title:"购买数量"}},[i("template",{slot:"right-icon"},[i("van-stepper",{attrs:{integer:"",max:1,min:1},model:{value:t.orderInfo.orderItem.itemCount,callback:function(e){t.$set(t.orderInfo.orderItem,"itemCount",e)},expression:"orderInfo.orderItem.itemCount"}})],1)],2)],1)]}},{key:"sku-actions",fn:function(e){return[i("div",{staticClass:"van-sku-actions"},[i("van-button",{attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:function(t){return e.skuEventBus.$emit("sku:buy")}}},[t._v("立即下单\n                    ")])],1)]}}]),model:{value:t.orderActionVisible,callback:function(e){t.orderActionVisible=e},expression:"orderActionVisible"}})],1),i("van-dialog",{attrs:{"show-cancel-button":!1,confirmButtonText:"扫码联系客服",closeOnClickOverlay:!0,title:"客服二维码"},model:{value:t.kefu.showKefuQrCode,callback:function(e){t.$set(t.kefu,"showKefuQrCode",e)},expression:"kefu.showKefuQrCode"}},[i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"85%"},attrs:{src:t.kefu.kefuQrcode}})])])],1)},o=[],a=(i("ac6a"),i("cebc")),s=(i("cadf"),i("551c"),i("f751"),i("097d"),i("5880")),r=i("b605"),c=i("2990"),l=i("61f7"),u={name:"YiTaoTask",computed:Object(a["a"])({},Object(s["mapGetters"])({shop:"shop"})),data:function(){return{imageList:[],kefu:{showKefuQrCode:!1,kefuQrcode:""},orderInfo:{itemAttachments:{invitationImage:{type:2,label:"invitationImage",name:"村淘二维码",value:""},email:{type:1,label:"email",name:"邮箱",value:""}},orderItem:{itemId:void 0,shopId:void 0,itemName:void 0,itemCount:7,attachments:void 0,sellingPrice:void 0}},itemInfo:{itemIds:[10000010],activeTab:0,tabs:[],thumbs:[],title:"一淘拉新",picture:"",items:[]},itemSwipeOption:{autoHeight:!0,pagination:{el:".swiper-pagination"},loop:!0,autoplay:!0},orderActionVisible:!1,loading:!1,sku:{tree:[{k:"任务类型",v:[{id:"single",name:"10人/次"}],k_s:"s1"}],list:[],stock_num:9999,price:"未选择规格"},initialSku:{s1:"single",selectedNum:1}}},methods:{onDeleteImage:function(t){this.orderInfo.itemAttachments.invitationImage.value=""},afterReadImage:function(t){var e=this;console.log(t);var i=new FormData;i.append("file",t.file),this.imageList=[],this.$toast.loading({mask:!0,forbidClick:!0,message:"上传中...",duration:0}),Object(r["d"])(i).then(function(i){e.imageList.push(t),e.orderInfo.itemAttachments.invitationImage.value=i.url,e.$toast.clear(),e.$toast.success("上传成功")}).catch(function(){e.$toast.clear(),e.$toast("上传失败，请稍后再试")})},onOverSize:function(){this.$toast("图片太大啦，上传图片不得大于1MB,若太大请压缩后上传哦")},onSkuSelected:function(t){},check:function(t){return!!(t&&t.length>0)},getItemName:function(t){var e=this;this.itemInfo.items.forEach(function(i){t===i.itemId&&(e.orderInfo.orderItem.itemName=i.itemName)})},onBuyClicked:function(t){if(!1!==this.check(this.orderInfo.itemAttachments.invitationImage.value))if(!this.orderInfo.itemAttachments.email.value||Object(l["a"])(this.orderInfo.itemAttachments.email.value)){this.loading=!0,this.orderInfo.orderItem.itemId=t.selectedSkuComb.id,this.getItemName(this.orderInfo.orderItem.itemId),this.orderInfo.orderItem.sellingPrice=t.selectedSkuComb.price;var e=[];e.push(this.orderInfo.itemAttachments.invitationImage),e.push(this.orderInfo.itemAttachments.email),this.orderInfo.orderItem.attachments=e;var i=[];i.push(this.orderInfo.orderItem),this.orderActionVisible=!1,this.loading=!1,this.$store.commit("SET_SHOPPING_CART",i),this.$router.push("/order_confirm")}else this.$toast("请输入正确的邮箱格式,如abc@qq.com");else this.$toast("请上传拉新二维码")},onContactService:function(){this.shop&&1===this.shop.kefuMode&&this.shop.kefuQrcode?this.kefu.kefuQrcode=this.shop.kefuQrcode:this.kefu.kefuQrcode="http://asset.sumaipo.com/item_detail/2019/05/23/581215550974332928.jpeg",this.kefu.showKefuQrCode=!0},onOrder:function(){this.orderActionVisible=!0},getItemDesc:function(){var t=this;Object(r["b"])(10000010).then(function(e){e.length>0&&(t.itemInfo.picture=e[0].imagePath),e.forEach(function(e){t.itemInfo.thumbs.push(e.imagePath)})})},getItemTabs:function(){var t=this;Object(r["c"])(10000010).then(function(e){t.itemInfo.tabs=e})},getItems:function(){var t=this;Object(c["b"])(this.shop.shopId).then(function(e){e&&e.length>0&&(e.filter(function(e){t.itemInfo.itemIds.indexOf(e.itemId)>=0&&t.itemInfo.items.push(e)}),e.filter(function(e){if(10000010===e.itemId){var i={id:e.itemId,price:e.sellingPrice,s1:"single",stock_num:9999};t.sku.list.push(i)}}))})}},created:function(){this.orderInfo.orderItem.shopId=this.shop.shopId,this.getItems(),this.getItemDesc(),this.getItemTabs()}},m=u,d=(i("ecf8"),i("2877")),f=Object(d["a"])(m,n,o,!1,null,"0d168cde",null);e["default"]=f.exports},ecf8:function(t,e,i){"use strict";var n=i("d6e3"),o=i.n(n);o.a}}]);
//# sourceMappingURL=chunk-5c1a0d10.10710f3e.js.map