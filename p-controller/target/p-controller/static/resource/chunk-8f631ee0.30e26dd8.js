(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f631ee0"],{"0520":function(t,o,e){},"29cd":function(t,o,e){t.exports=e.p+"img/qq_login.5b1c183d.png"},"4c01":function(t,o,e){t.exports=e.p+"img/weibo_login.a1119ee8.png"},"50e7":function(t,o,e){t.exports=e.p+"img/wechat_login.d113ffee.png"},"748d":function(t,o,e){"use strict";var i=e("0520"),n=e.n(i);n.a},a55b:function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showAccountPwdInput,expression:"showAccountPwdInput"}],staticClass:"tab-content",attrs:{id:"login-page"}},[i("van-nav-bar",{staticClass:"nav-bar-bg",attrs:{title:"用户登录","left-text":"返回","left-arrow":""},on:{"click-left":function(o){return t.$router.push("/")}}}),i("van-cell-group",{staticStyle:{"margin-top":"10px"}},[i("van-field",{attrs:{required:"",clearable:"",label:"用户名",placeholder:"请选择下方第三方登录,用户名密码登录未开放"},on:{input:function(o){return t.$toast("请选择下方的第三方登录，用户名密码登录暂未开放")}},model:{value:t.loginForm.username,callback:function(o){t.$set(t.loginForm,"username",o)},expression:"loginForm.username"}}),i("van-field",{attrs:{type:"password",label:"密码",placeholder:"请选择下方第三方登录,用户名密码登录未开放",required:""},on:{input:function(o){return t.$toast("请选择下方的第三方登录，用户名密码登录暂未开放")}},model:{value:t.loginForm.password,callback:function(o){t.$set(t.loginForm,"password",o)},expression:"loginForm.password"}})],1),i("h2",{staticClass:"content-section-title"},[t._v("温馨提示：登录时即代表您已同意《用户服务协议》《隐私政策》")]),i("van-button",{staticStyle:{"background-color":"#189062",width:"90%","border-color":"#189062",margin:"10px auto","border-radius":"3px"},attrs:{square:"",block:"",type:"primary"},on:{click:function(o){return t.$toast("请选择下方的第三方登录，用户名密码登录暂未开放")}}},[t._v("\n        登录\n    ")]),i("div",{staticClass:"oauth-login",staticStyle:{position:"fixed",bottom:"0px",width:"100%"}},[i("h2",{staticClass:"content-section-title",staticStyle:{"text-align":"center"}},[t._v("----------第三方登录----------")]),i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("img",{staticStyle:{height:"60px",width:"60px"},attrs:{src:e("29cd")},on:{click:t.qqAuth}}),i("img",{staticStyle:{height:"60px",width:"60px"},attrs:{src:e("50e7")},on:{click:t.wxmpAuth}}),i("img",{staticStyle:{height:"60px",width:"60px"},attrs:{src:e("4c01")},on:{click:t.weiboAuth}})])]),i("van-popup",{attrs:{position:"top",overlay:!1},model:{value:t.showTip,callback:function(o){t.showTip=o},expression:"showTip"}},[t._v("\n        请选择下方的【QQ】|【微信】|【微博】登录，点击图标即可快速登录哦\n    ")]),i("van-dialog",{attrs:{"show-confirm-button":"","show-cancel-button":"",confirmButtonText:"复制链接",title:"登录提示"},on:{confirm:t.copyUrl},model:{value:t.showQrcode,callback:function(o){t.showQrcode=o},expression:"showQrcode"}},[i("div",{staticStyle:{"text-align":"center"}},[i("img",{attrs:{src:t.payQrcode}}),i("div",{staticStyle:{"margin-bottom":"5px","font-size":"14px",color:"#4CAF50"}},[t._v("请使用微信扫码或复制链接到微信打开")])])])],1)},n=[],s=e("cebc"),c=(e("cadf"),e("551c"),e("f751"),e("097d"),e("f087")),r=e("359d"),a=e("5880"),h=e("2990"),l={name:"Login",computed:Object(s["a"])({},Object(a["mapGetters"])({inInWeChat:"isInWechat"})),data:function(){return{showQrcode:!1,payQrcode:"",loginForm:{username:"",password:""},showAccountPwdInput:!1,loginType:void 0,code:void 0,shopCode:void 0,redirectURL:void 0,userInfo:void 0,token:void 0,showTip:!0}},methods:{copyUrl:function(){var t=this,o=encodeURI(window.location.href);Object(h["h"])(o).then(function(o){t.$copyText(o).then(function(o){t.$toast.success("复制成功，可以前往微信粘贴打开哦")}).catch(function(){t.$toast.fail("复制失败,请扫码打开哦")})})},qqAuth:function(){this.loginType="qq",this.loginSelect()},weiboAuth:function(){this.loginType="weibo",this.loginSelect()},wxmpAuth:function(){this.inInWeChat?(this.loginType="wxmp",this.loginSelect()):(this.payQrcode="http://shop.sumaipo.com/api/url/qr_code.jpg?url="+encodeURIComponent(encodeURIComponent(window.location.href)),this.showQrcode=!0)},initQueryParams:function(){this.code=this.$route.query&&this.$route.query.code,this.shopCode=this.$route.query&&this.$route.query.s,this.loginType=this.$route.query&&this.$route.query.type,this.redirectURL=this.$route.query.redirect||"/home"},loginSelect:function(){var t=this;this.tail,this.code?(this.$toast.loading({mask:!0,message:"授权成功，跳转中..."}),"qq"===this.loginType?Object(c["h"])(this.code,this.state).then(function(o){t.$store.commit("SET_TOKEN",o),Object(r["f"])(o),t.$toast.clear(),t.$router.push({path:t.redirectURL})}):"wxmp"===this.loginType?Object(c["j"])(this.code,this.state).then(function(o){t.$store.commit("SET_TOKEN",o),Object(r["f"])(o),t.$toast.clear(),t.$router.push({path:t.redirectURL})}):"weibo"===this.loginType?Object(c["k"])(this.code,this.state).then(function(o){t.$store.commit("SET_TOKEN",o),Object(r["f"])(o),t.$toast.clear(),t.$router.push({path:t.redirectURL})}):(this.loginType,this.showAccountPwdInput=!0)):("qq"===this.loginType?window.location.href=encodeURI("http://shop.sumaipo.com/api/login/oauth?type=3&dest_url="+encodeURIComponent(encodeURIComponent(this.redirectURL))+"&origin_host="+encodeURI(window.location.origin)+"&bus_info="+this.shopCode):"wxmp"===this.loginType?window.location.href=encodeURI("http://shop.sumaipo.com/api/login/oauth?type=1&dest_url="+encodeURIComponent(encodeURIComponent(this.redirectURL))+"&origin_host="+encodeURI(window.location.origin)+"&bus_info="+this.shopCode):"weibo"===this.loginType?window.location.href=encodeURI("http://shop.sumaipo.com/api/login/oauth?type=2&dest_url="+encodeURIComponent(encodeURIComponent(this.redirectURL))+"&origin_host="+encodeURI(window.location.origin)+"&bus_info="+this.shopCode):(this.loginType,this.showAccountPwdInput=!0),this.showAccountPwdInput=!0)}},mounted:function(){this.initQueryParams(),this.loginSelect()},created:function(){var t=this;setTimeout(function(){t.showTip=!1},5e3)}},p=l,u=(e("748d"),e("2877")),d=Object(u["a"])(p,i,n,!1,null,"434b0251",null);o["default"]=d.exports}}]);
//# sourceMappingURL=chunk-8f631ee0.30e26dd8.js.map