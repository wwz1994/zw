(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-071b1568"],{"09a5":function(t,e,i){},2202:function(t,e,i){"use strict";var a=i("09a5"),n=i.n(a);n.a},"61f7":function(t,e,i){"use strict";function a(t){return/^((19[0-9])|(16[0-9])|(17[0-9])|(14[0-9])|(13[0-9])|(15[^4,\D])|(18[0-9]))\d{8}$/.test(t)}function n(t){return/^([a-z0-9A-Z]+[-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/.test(t)}function s(t){return!!t&&5==t.length}function o(t){return/^\d{6}$/.test(t)}i.d(e,"b",function(){return a}),i.d(e,"a",function(){return n}),i.d(e,"d",function(){return s}),i.d(e,"c",function(){return o})},b605:function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return o});i("cadf"),i("551c"),i("f751"),i("097d");var a=i("b775");function n(t){return Object(a["a"])({url:"/item/gallery/"+t})}function s(t){return Object(a["a"])({url:"/item/tab",params:{item_id:t}})}function o(t,e){return Object(a["a"])({url:"/item/item_link/check",method:"post",params:{item_text:t,item_link:e},timeout:1e4})}},cf06:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:"成交人数任务自动完成",expression:"'成交人数任务自动完成'"}],staticClass:"tab-content"},[i("van-nav-bar",{staticClass:"nav-bar-bg",attrs:{fixed:"",title:"成交人数任务","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),i("main",{staticClass:"tab-main-move-down"},[i("swiper",{ref:"itemSwiper",staticStyle:{"z-index":"0"},attrs:{options:t.itemSwipeOption}},[t._l(t.thumbs,function(t){return i("swiper-slide",{key:t,staticClass:"swipe-item"},[i("img",{staticClass:"swipe-img",attrs:{preview:"deal_num_task",src:t}})])}),i("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2),i("van-cell-group",[i("van-cell",{staticClass:"goods-express"},[i("van-col",{attrs:{span:"10"}},[t._v("库存：较多")]),i("van-col",{attrs:{span:"14"}},[t._v("购物券：不支持")])],1),i("van-cell",{staticClass:"goods-express"},[i("van-col",{attrs:{span:"10"}},[t._v("退款政策：支持退款")]),i("van-col",{attrs:{span:"14"}},[t._v("买家需提供：商品链接")])],1)],1),i("van-cell-group",{staticClass:"goods-cell-group"},[i("van-cell",{attrs:{value:"进入店铺",icon:"shop-o","is-link":""},on:{click:function(e){return t.$router.push("/home")}}},[i("template",{slot:"title"},[i("span",{staticClass:"van-cell-text"},[t._v(t._s(t.shop.shopName))])])],2)],1),i("van-tabs",{staticClass:"item-detail-help-card",attrs:{type:"card",color:"#607D8B"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabs,function(e){return i("van-tab",{key:e.id,attrs:{title:e.tabName}},[i("div",{staticClass:"tab-detail-content",domProps:{innerHTML:t._s(e.tabContent)}})])}),1),i("van-goods-action",[i("van-goods-action-icon",{attrs:{icon:"chat-o",text:"客服"},on:{click:t.onContactService}}),i("van-goods-action-icon",{attrs:{icon:"shop-o",text:"店铺"},on:{click:function(e){return t.$router.push("/home")}}}),i("van-goods-action-button",{attrs:{type:"primary",text:"立即购买"},on:{click:t.onOrder}})],1),i("van-sku",{attrs:{"stepper-title":"购买数量",sku:t.sku,goods:t.goods,"hide-stock":!0,"initial-sku":t.initialSku},on:{"sku-selected":t.onSkuSelected,"buy-clicked":t.onBuyClicked},scopedSlots:t._u([{key:"sku-messages",fn:function(e){return[i("van-cell-group",{staticStyle:{"margin-bottom":"20px"}},[i("van-field",{attrs:{required:"",clearable:"",type:"textarea",label:"商品链接",placeholder:"请输入淘宝联盟复制的商品链接"},model:{value:t.itemAttachments.taoItemLink.value,callback:function(e){t.$set(t.itemAttachments.taoItemLink,"value",e)},expression:"itemAttachments.taoItemLink.value"}}),i("van-field",{attrs:{clearable:"",label:"邮箱:",placeholder:"(选填)请输入邮箱以便接收通知"},model:{value:t.itemAttachments.email.value,callback:function(e){t.$set(t.itemAttachments.email,"value",e)},expression:"itemAttachments.email.value"}})],1)]}},{key:"sku-stepper",fn:function(e){return[i("div",[i("van-cell",{attrs:{title:"购买数量"}},[i("template",{slot:"right-icon"},[i("van-stepper",{attrs:{integer:"",max:7},model:{value:t.orderItem.itemCount,callback:function(e){t.$set(t.orderItem,"itemCount",e)},expression:"orderItem.itemCount"}})],1)],2)],1)]}},{key:"sku-actions",fn:function(e){return[i("div",{staticClass:"van-sku-actions"},[i("van-button",{attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:function(t){return e.skuEventBus.$emit("sku:buy")}}},[t._v("立即下单\n                    ")])],1)]}}]),model:{value:t.orderActionVisible,callback:function(e){t.orderActionVisible=e},expression:"orderActionVisible"}})],1),i("van-dialog",{attrs:{"show-cancel-button":!1,confirmButtonText:"扫码联系客服",closeOnClickOverlay:!0,title:"客服二维码"},model:{value:t.showKefuQrCode,callback:function(e){t.showKefuQrCode=e},expression:"showKefuQrCode"}},[i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"85%"},attrs:{src:t.kefuQrcode}})])])],1)},n=[],s=(i("ac6a"),i("cebc")),o=i("2990"),c=i("5880"),r=i("b605"),l=i("61f7"),u={name:"DealNumTask",computed:Object(s["a"])({},Object(c["mapGetters"])({shop:"shop"})),data:function(){return{showKefuQrCode:!1,kefuQrcode:"",initialSku:{s1:"single",selectedNum:7},sku:{tree:[{k:"任务类型",v:[{id:"package12",name:"一年包/12月*7人"},{id:"package6",name:"半年包/6月*7人"},{id:"single",name:"按个数"}],k_s:"s1"}],list:[],none_sku:!1,stock_num:9999,price:"未选择规格"},goods:{title:"成交人数任务",picture:""},orderActionVisible:!1,activeTab:0,radio:"",thumbs:[],loading:!1,itemSwipeOption:{autoHeight:!0,pagination:{el:".swiper-pagination"},loop:!0,autoplay:!0},orderItem:{itemId:void 0,shopId:void 0,itemName:void 0,itemCount:7,attachments:void 0,sellingPrice:void 0},email:"",taoItemLink:"",itemAttachments:{taoItemLink:{type:1,label:"itemLink",name:"商品链接",value:""},email:{type:1,label:"email",name:"邮箱",value:""}},items:[],tabs:[],url:""}},methods:{onSkuSelected:function(t){"package6"===t.selectedSku.s1||"package12"===t.selectedSku.s1?this.orderItem.itemCount=1:this.orderItem.itemCount=7},check:function(t){if(t&&t.length>0){var e=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,i=e.exec(t);return!!i&&(this.url=i[0],!0)}return!1},getItemName:function(t){var e=this;this.items.forEach(function(i){t===i.itemId&&(e.orderItem.itemName=i.itemName)})},onBuyClicked:function(t){var e=this;!1!==this.check(this.itemAttachments.taoItemLink.value)?!this.itemAttachments.email.value||Object(l["a"])(this.itemAttachments.email.value)?(this.loading=!0,Object(r["a"])(this.itemAttachments.taoItemLink.value,this.url).then(function(i){e.orderItem.itemId=t.selectedSkuComb.id,e.getItemName(e.orderItem.itemId),e.orderItem.sellingPrice=t.selectedSkuComb.price;var a=[];a.push(e.itemAttachments.taoItemLink),a.push(e.itemAttachments.email),e.orderItem.attachments=a;var n=[];n.push(e.orderItem),e.orderActionVisible=!1,e.loading=!1,e.$store.commit("SET_SHOPPING_CART",n),e.$router.push("/order_confirm")}).catch(function(){e.loading=!1})):this.$toast("请输入正确的邮箱格式,如abc@qq.com"):this.$toast("请输入正确的商品链接")},onContactService:function(){this.shop&&1===this.shop.kefuMode&&this.shop.kefuQrcode?this.kefuQrcode=this.shop.kefuQrcode:this.kefuQrcode="http://asset.sumaipo.com/item_detail/2019/05/23/581215550974332928.jpeg",this.showKefuQrCode=!0},onOrder:function(){this.orderActionVisible=!0},getItemDesc:function(){var t=this;Object(r["b"])(10000002).then(function(e){e.length>0&&(t.goods.picture=e[0].imagePath),e.forEach(function(e){t.thumbs.push(e.imagePath)})})},getItemTabs:function(){var t=this;Object(r["c"])(10000002).then(function(e){t.tabs=e})}},created:function(){var t=this;this.orderItem.shopId=this.shop.shopId,Object(o["b"])(this.shop.shopId).then(function(e){e&&(t.items=e.filter(function(t){return 10000002===t.itemId||10000003===t.itemId||10000004===t.itemId}),e.filter(function(e){if(10000002===e.itemId){var i={id:e.itemId,price:e.sellingPrice,s1:"single",stock_num:9999};t.sku.list.push(i)}if(10000003===e.itemId){var a={id:e.itemId,price:e.sellingPrice,s1:"package12",stock_num:9999};t.sku.list.push(a)}if(10000004===e.itemId){var n={id:e.itemId,price:e.sellingPrice,s1:"package6",stock_num:9999};t.sku.list.push(n)}}))}),this.getItemDesc(),this.getItemTabs()}},m=u,d=(i("2202"),i("2877")),h=Object(d["a"])(m,a,n,!1,null,"6992e6fc",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-071b1568.4c4e01c2.js.map