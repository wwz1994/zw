(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fc6c58b"],{5240:function(t,e,a){},5408:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"order-list"}},[a("van-nav-bar",{staticClass:"nav-bar-bg",attrs:{"left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":function(e){return t.$router.push("/profile")}}},[a("div",{attrs:{slot:"title"},on:{click:t.showCategory},slot:"title"},[t._v("\n            我的订单\n            ")])]),a("van-popup",{attrs:{position:"bottom"},model:{value:t.categoryVisible,callback:function(e){t.categoryVisible=e},expression:"categoryVisible"}},[a("div",{staticClass:"van-hairline--top-bottom van-picker__toolbar"},[a("div",{staticClass:"van-picker__cancel",on:{click:function(e){t.categoryVisible=!1}}},[t._v("取消")]),a("div",{staticClass:"van-picker__confirm",on:{click:t.selectOrderListByCategory}},[t._v("确认")])]),a("van-picker",{attrs:{columns:t.category},on:{change:t.onCategoryChange}})],1),a("div",{staticClass:"order-list-content"},[a("van-tabs",{attrs:{sticky:""},on:{click:t.onClickTab},model:{value:t.activeTabIndex,callback:function(e){t.activeTabIndex=e},expression:"activeTabIndex"}},t._l(t.tabs,function(e){return a("van-tab",{key:e.index,staticClass:"tab-content",attrs:{title:e.title}},[0===t.orders.length?a("div",{staticStyle:{"text-align":"center","margin-top":"30px","background-color":"#ebedf0","font-size":"14px",color:"darkgrey"}},[t._v("\n                    "+t._s(t.loadingText)+"\n                ")]):a("div",[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isOnRefresh,callback:function(e){t.isOnRefresh=e},expression:"isOnRefresh"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoadMessage},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.orders,function(e,r){return a("div",{key:e.orderId,staticClass:"order-item"},[a("van-cell-group",{staticClass:"goods-cell-group"},[a("van-cell",{attrs:{icon:"shop-o"},on:{click:function(e){return t.$router.push("/home")}}},[a("div",{staticStyle:{color:"#ff2131"}},[t._v(t._s(t._f("orderStatusFormatter")(e.orderStatus))+"\n                                        ")]),a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("\n                                    "+t._s(t.shop.shopName)+"\n                                ")]),a("van-icon",{attrs:{name:"arrow"}})],1)])],1),a("div",{staticClass:"item-list"},[t._l(e.items,function(e,r){return a("van-card",{key:r,attrs:{num:e.itemCount,price:e.retailPrice/100,title:e.itemName},on:{click:function(a){return t.viewDetail(e.orderId)}}})}),a("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"8px","background-color":"#fafafa","border-top":"1px solid #ebedf0"}},[a("div",{staticStyle:{"font-size":"12px","padding-top":"5px",color:"#34495e"}},[t._v("\n                                            "+t._s(t._f("dataFormatSec")(e.createTime))+"\n                                        ")]),a("div",[1===e.orderStatus?a("van-button",{staticStyle:{"margin-left":"6px"},attrs:{type:"primary",size:"small",round:"",plain:"",loading:t.receiptLoading},on:{click:function(a){return t.receiptOrder(e.orderId)}}},[t._v("验收\n                                            ")]):t._e(),0==e.orderStatus?a("van-button",{staticStyle:{"margin-left":"6px"},attrs:{type:"warning",size:"small",round:"",plain:""},on:{click:function(a){return t.$router.push("/cash_desk?od="+e.orderId)}}},[t._v("付款\n                                            ")]):t._e()],1)])],2)],1)}),0)],1)],1)])}),1)],1)],1)},n=[],s=(a("ac6a"),a("cebc")),i=a("5880"),o=a("dcbd"),c={name:"OrderList",filters:{orderStatusFormatter:function(t){switch(t){case 0:return"等待付款";case 1:return"已支付";case 2:return"退款中";case 3:return"已退款";case 4:return"订单已关闭";case 5:return"已完成";default:return"获取中"}}},computed:Object(s["a"])({},Object(i["mapGetters"])({shop:"shop"})),data:function(){return{tabs:[{title:"全部",order_status:void 0},{title:"待付款",order_status:0},{title:"已付款",order_status:1},{title:"退款/售后",order_status:2},{title:"已完成",order_status:5}],loadingText:"",activeTabIndex:0,categoryVisible:!1,category:["拉新","引流","QQ业务"],queryParams:{page_size:10,page_num:1,order_status:void 0,cleaned:void 0},orders:[],isOnRefresh:!1,loading:!1,finished:!1,receiptLoading:!1}},methods:{receiptOrder:function(t){var e=this;this.$dialog.confirm({title:"验收提醒",message:"验收即代表您购买的商品/服务您已确认收到,产生的费用将转入商家账户"}).then(function(){e.$toast.loading({mask:!0,message:"验收中...",forbidClick:!0}),Object(o["h"])(t).then(function(t){e.$toast.clear(),e.$toast.success("验收成功，感谢您的支持~"),e.onRefresh()}).catch(function(){return e.$toast.clear()})}).catch(function(){})},onRefresh:function(){var t=this;this.queryParams.page_num=1,Object(o["e"])(this.shop.shopId,this.queryParams).then(function(e){t.orders=e.list,t.queryParams.page_num=e.pageNum,t.isOnRefresh=!1}).catch(function(){t.isOnRefresh=!1})},onLoadMessage:function(){var t=this;this.queryParams.page_num+=1,Object(o["e"])(this.shop.shopId,this.queryParams).then(function(e){e.list.forEach(function(e){t.orders.push(e)}),e.hasNextPage||(t.finished=!0),t.loading=!1})},onClickTab:function(t,e){this.activeTabIndex=t,this.orders=[],this.queryParams.page_num=1,this.queryParams.order_status=this.tabs[t].order_status,this.getOrderByParams()},viewDetail:function(t){this.$router.push({path:"/order_detail",query:{id:t}})},onCategoryChange:function(){},showCategory:function(){},onApplyRefund:function(){},selectOrderListByCategory:function(){this.categoryVisible=!1},searchOrderList:function(){alert("搜索")},getOrderByParams:function(){var t=this;this.loadingText="努力加载中...",Object(o["e"])(this.shop.shopId,this.queryParams).then(function(e){t.orders=e.list,t.queryParams.page_num=e.pageNum,0===t.orders.length&&(t.loadingText="暂无订单数据~~~~")})}},mounted:function(){},created:function(){var t=this.$route.query.tab||0;this.onClickTab(t,"")}},l=c,u=(a("831f"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,"73938b00",null);e["default"]=d.exports},"831f":function(t,e,a){"use strict";var r=a("5240"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-0fc6c58b.78d94585.js.map