<!DOCTYPE html>
<html>
<head>
    <title> ZTREE DEMO - Simple Data</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link  type="text/css"  rel="stylesheet" href="./common/plugin/ztree/css/bootstrapstyle.css"/>
<!--    <link rel="stylesheet" href="../../common/plugin/ztree/css/bootstrapstyle.css" type="text/css">

    <script src="../../common/js/config.js"></script>-->
    <script type="text/javascript" src="./common/plugin/ztree/jquery.ztree.core.js"></script>
    <script type="text/javascript" src="./common/plugin/ztree/jquery.ztree.excheck.js"></script>
    <script type="text/javascript" src="./common/plugin/ztree/jquery.ztree.exedit.js"></script>

    <script type="text/javascript">
        <!--
        var setting = {
            view: {
                addHoverDom: addHoverDom,
                removeHoverDom: removeHoverDom,
                selectedMulti: false
            },
            check: {
                enable: true
            },
            data: {
                simpleData: {
                    enable: true
                }
            },
            edit: {
                enable: false
            }
        };

        var zNodes =[{

        }
        ];


        $(document).ready(function(){
            Dao({
                url:Config.root+'/web-v/menu/queryMenuJson.json',
                dataType:'json',
                success:function(data){
                    zNodes = data;
                    $.fn.zTree.init($("#treeDemo"), setting, data);
                }
            })

        });

        var newCount = 1;
        function addHoverDom(treeId, treeNode) {
            var sObj = $("#" + treeNode.tId + "_span");
            if (treeNode.editNameFlag || $("#addBtn_"+treeNode.tId).length>0) return;
            var addStr = "<span class='button add' id='addBtn_" + treeNode.tId
                    + "' title='add node' onfocus='this.blur();'></span>";
            sObj.after(addStr);
            var btn = $("#addBtn_"+treeNode.tId);
            if (btn) btn.bind("click", function(){
                var zTree = $.fn.zTree.getZTreeObj("treeDemo");
                zTree.addNodes(treeNode, {id:(100 + newCount), pId:treeNode.id, name:"new node" + (newCount++)});
                return false;
            });
        };
        function removeHoverDom(treeId, treeNode) {
            $("#addBtn_"+treeNode.tId).unbind().remove();
        };
        //-->
    </script>
</head>
<body>
<ul id="treeDemo" class="ztree"></ul>
</body>
</html>